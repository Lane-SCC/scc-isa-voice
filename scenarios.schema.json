{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "mcd": { "$ref": "#/definitions/section" },
    "m1": { "$ref": "#/definitions/section" },
    "m2": { "$ref": "#/definitions/section" }
  },
  "required": ["mcd", "m1", "m2"],
  "definitions": {
    "section": {
      "type": "object",
      "properties": {
        "Standard": { "type": "array", "items": { "$ref": "#/definitions/scenario" } },
        "Moderate": { "type": "array", "items": { "$ref": "#/definitions/scenario" } },
        "Edge": { "type": "array", "items": { "$ref": "#/definitions/scenario" } }
      },
      "required": ["Standard", "Moderate", "Edge"]
    },
    "scenario": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "summary": { "type": "string" },
        "objective": { "type": "string" },
        "borrowerName": { "type": "string" },
        "borrowerGender": { "type": "string" },
        "borrowerStyle": { "type": "string" },
        "emotionalBaseline": { "type": "string" },
        "stallReason": { "type": "string" },
        "ruleFocus": { "type": "array", "items": { "type": "string" } },
        "baitType": { "type": "string" },
        "requiredOutcome": { "type": "string" },
        "openers": { "type": "array", "items": { "type": "string" } },
        "pressureLines": { "type": "array", "items": { "type": "string" } },
        "escalationLadder": { "type": "array", "items": { "type": "string" } },
        "mustHit": {
          "type": "array",
          "items": {
            "oneOf": [
              { "type": "string" },
              {
                "type": "object",
                "properties": {
                  "id": { "type": "string" },
                  "label": { "type": "string" },
                  "required": { "type": "boolean" },
                  "patterns": { "type": "array", "items": { "type": "string" } }
                },
                "required": ["label"],
                "additionalProperties": false
              }
            ]
          }
        },
        "handoffForbiddenUntil": { "type": "string" },
        "loEscalationScript": { "type": "string" }
      },
      "required": [
        "id",
        "summary",
        "objective",
        "borrowerName",
        "borrowerGender",
        "borrowerStyle",
        "emotionalBaseline",
        "stallReason",
        "ruleFocus",
        "baitType",
        "requiredOutcome",
        "openers",
        "mustHit",
        "handoffForbiddenUntil",
        "loEscalationScript"
      ]
    }
  }
}
